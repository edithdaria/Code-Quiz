<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <title>Coding Quiz</title>
</head>
<body>

<table width=100%>
    <tr>
        <th><a href="#HighScore-Form" class = "high-score">View High Score</a></th>
        <th class = "time">Time Left: 0</th>
    </tr>
</table>
    
<center>
    <div class="jumbotron" id ="start-page">
        <h1 class="display-4">Coding Quiz Challenge</h1>
        <p class="lead">Try to answer the following code related questions within the time limit. Keep in mind that incorrect answer will penalize your score by 1 and time by 10 seconds</p>
        <a class="btn btn-primary btn-lg" id="start-button" role="button">Start</a>
      </div>
</center>

<!-- Questions -->
<center>

    <div class="jumbotron hide" id ="question-page">
        <div id = "question-portion">
        <!-- questions -->
        </div>
        <hr class="my-4">
        <!-- Multiple choice answers -->

        <div class = "button-group ">
            <!-- button -->
        </div>
    </div>

    <!-- alert right or wrong -->
        <div class="alert alert-success hide" id="correct" role="alert">
            <h3>Correct!</h3>
        </div>

        <div class="alert alert-danger hide" id="wrong" role="alert">
            <h3>Wrong!</h3>
        </div>
</center>

<center>
    <div class = "hide" id ="HighScore-Form">
        <h1 class = "hide" id="all-done">All done!</h1>
        <div id = "score-display">
        </div>
        <form>
            <br>
        <strong class = "hide" style = "font-size: 16pt;" id = "intials-word" >Initials: </strong><input type="text" id="initials" class = "hide" placeholder="Name">


        <a class="btn btn-primary btn-md hide" id ="submit-button" role="button">Submit</a>

        <br>
        <a class="btn btn-primary btn-md hide" id ="clear-button" role="button">Clear</a>


        <a class="btn btn-primary btn-md hide" id ="goback-button" role="button">Go back</a>

        </form>
    </div>
</center>



<script>
    var QandA = [
    {
        q:"Commonly used data types DO NOT include:",
        a:"alerts",
        mc:["strings", "boolean", "alerts", "numbers"]
    },
    {
        q:"The condition in an if / else statement is enclosed within ___.",
        a:"parentheses",
        mc:["quotes", "curly braces", "parentheses", "square brackets"]
    },
    
    {
        q:"Arrays in JavaScripts can be used to store ____.",
        a:"all of the above",
        mc:["numbers and strings", "other arrays", "booleans", "all of the above"]
    },
    
    {
        q:"String values must be enclosed within ____ when being assigned to variables.",
        a:"quotes",
        mc:["commas", "curly braces", "quotes", "parentheses"]
    }
    
    ];
    

//observe the start button
var startButton = document.querySelector("#start-button");

//observe the start jumbotron
var startPage = document.querySelector("#start-page");
// //observe the question jumbotron

//observe the time left
var timeLeft = document.querySelector(".time");

//observe the question element
var question = document.querySelector("#question-page");

//observe the question portion element
var questionPortion = document.querySelector("#question-portion");

//observe the answerBtn element
var buttonGroup = document.querySelector(".button-group");

//observe correct alert
var correct = document.querySelector("#correct");

//observe wrong alert
var wrong = document.querySelector("#wrong");

//observe HighScore-Form
var scoreForm = document.querySelector("#HighScore-Form");

//observe initials
var initials = document.querySelector("#initials");

//observe initials-word
var initialsWord = document.querySelector("#intials-word");

//observe submit-button
var submitButton = document.querySelector("#submit-button");

//observe clear-button
var clearButton = document.querySelector("#clear-button");

//observe clear-button
var gobackButton = document.querySelector("#goback-button");


//listen to the clicking on start button
startButton.addEventListener("click", startQuiz);


//observe score-display
var scoreDisplay = document.querySelector("#score-display");



var timeRemaining = 75;
var score = 0;
var finalScore = 0;
var current_question = 0;
var people =[{}];
var currentId = 0;

//write the function to startQuiz
function startQuiz(event){

event.preventDefault();

    //the start page has to disapper
    startPage.classList.add("hide");

    //display the questions page
    question.classList.remove("hide");

    //the time has to countdown from 75 seconds
    var timer = setInterval(timeCalculation, 1000);

    function timeCalculation(){    
        timeLeft.textContent = "Time left: " + timeRemaining;
         
        if (timeRemaining <= 0 || current_question === QandA.length) {
            clearInterval(timer);
            finalScore = score;
            reset();
            viewHighScores(finalScore);
        }

        timeRemaining--;   
 
    }
    questions(current_question);



}

    //write a function to circulate the questions
    function questions(i){
   
        questionPortion.innerHTML = "";
        buttonGroup.innerHTML = "";
        correct.classList.add("hide");
        wrong.classList.add("hide");
    


        var questionEl = document.createElement("p");
        questionEl.textContent = QandA[i].q;
        questionPortion.appendChild(questionEl);

        var CorrectAnswer = QandA[i].a;  


        // answerBtn1.textContent = QandA[0].mc[0];
        var answer1El = document.createElement("a");
        answer1El.setAttribute("class", "btn btn-primary btn-lg");
        answer1El.textContent = QandA[i].mc[0];
	    answer1El.href = "javascript: checkClickedAnswer('" + QandA[i].mc[0] + "');";
        buttonGroup.appendChild(answer1El);


        // answerBtn2.textContent = QandA[0].mc[1];
        var answer2El = document.createElement("a");
        answer2El.setAttribute("class", "btn btn-primary btn-lg");
        answer2El.textContent = QandA[i].mc[1];
	    answer2El.href = "javascript: checkClickedAnswer('" + QandA[i].mc[1] + "');";
        buttonGroup.appendChild(answer2El);


        // answerBtn3.textContent = QandA[0].mc[2];
        var answer3El = document.createElement("a");
        answer3El.setAttribute("class", "btn btn-primary btn-lg");
        answer3El.textContent = QandA[i].mc[2];
	    answer3El.href = "javascript: checkClickedAnswer('" + QandA[i].mc[2] + "');";
        buttonGroup.appendChild(answer3El);



        // answerBtn4.textContent = QandA[0].mc[3];
        var answer4El = document.createElement("a");
        answer4El.setAttribute("class", "btn btn-primary btn-lg");
        answer4El.textContent = QandA[i].mc[3];
	    answer4El.href = "javascript: checkClickedAnswer('" + QandA[i].mc[3] + "');";
        buttonGroup.appendChild(answer4El);
        
}


    function checkClickedAnswer(event){

    var answer = QandA[current_question].a;

            if(event === answer ){
                correct.classList.remove("hide");
                score++;
            }

            else{
                wrong.classList.remove("hide");
                timeRemaining -= 10;
                score--;
            }
       
    setTimeout(() => { questions(++current_question); }, 500);
    
    }

        function reset(){    
            scoreForm.classList.remove("hide");
            timeLeft.textContent = "Time left: " + 0;
            correct.classList.add("hide");
            wrong.classList.add("hide");
            question.classList.add("hide");
        }

        function viewHighScores(s){
            initials.classList.remove("hide");
            initialsWord.classList.remove("hide");
            submitButton.classList.remove("hide");
            
            var newHighscore = document.createElement("h3");
            newHighscore.textContent = "Your score is: " + s;
            scoreDisplay.appendChild(newHighscore);

            submitButton.addEventListener("click", saveScore);

            function saveScore(event){
                event.preventDefault();
                var name = initials.value;
                var ul = document.createElement("ul");
                ul.setAttribute("style", " fontSize: 500px; width:50%; color:black; border:1px solid grey;");
                ul.innerHTML = name + " - " + finalScore;
                people.push({name: name});
                scoreDisplay.appendChild(ul);
                clearButton.classList.remove("hide");
                gobackButton.classList.remove("hide");  
                initials.classList.add("hide");
                initialsWord.classList.add("hide");
                submitButton.classList.add("hide");

                clearButton.addEventListener("click", clearContent);

            function clearContent(){
                scoreDisplay.removeChild(ul);
            }

            }

            gobackButton.addEventListener("click", goback);

            function goback(){
                startPage.classList.remove("hide");
                scoreForm.classList.add("hide");
            }  
            
            
        }


</script>
</body>
</html>